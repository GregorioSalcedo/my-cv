library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
quanteda.bundle <- c( "quanteda", "quanteda.textmodels",
"quanteda.textstats", "quanteda.textplots" )
install.packages( quanteda.bundle )
install.packages(quanteda.bundle)
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
install.packages("quanteda.textmodels")
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
install.packages("quanteda.textmodels", type = "source")
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
install.packages("remotes")
remotes::install_github("quanteda/quanteda.textmodels")
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels)
remove.packages("quanteda.textmodels")
remove.packages("quanteda.textmodels")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.rstudio.com")
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodel )
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
library( dplyr )
library( pander )
library( quanteda )
library(quanteda.textmodels)
installed.packages()["quanteda.textmodels", ]
installed.packages()["quanteda.textmodels", ]
remove.packages("quanteda.textmodels")
remove.packages("quanteda")
remove.packages("quanteda.textstats")
remove.packages("quanteda.textplots")
install.packages("quanteda")
install.packages("quanteda.textstats")
install.packages("quanteda.textplots")
install.packages("quanteda.textmodels")
install.packages("remotes")  # If not installed
remotes::install_github("quanteda/quanteda.textmodels")
library(quanteda.textmodels)
remove.packages("quanteda.textmodels")
remove.packages("quanteda")
remove.packages("quanteda.textstats")
remove.packages("quanteda.textplots")
install.packages("devtools")
install.packages("Rcpp")
install.packages("data.table")
install.packages("Matrix")
install.packages("tm")
install.packages("devtools")
devtools::install_github("quanteda/quanteda.textmodels")
library(quanteda.textmodels)
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.rstudio.com")
library(quanteda.textmodels)
install.packages("Rcpp")
install.packages("RcppArmadillo")
install.packages("Matrix")
install.packages("text2vec")
install.packages("tm")
install.packages("glmnet")
install.packages("topicmodels")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.rstudio.com")
library(quanteda.textmodels)
sessionInfo()
install.packages("devtools")
install.packages("Rcpp")
install.packages("RcppArmadillo")
install.packages("devtools")
install.packages("Matrix")
install.packages("text2vec")
install.packages("tm")
install.packages("glmnet")
install.packages("topicmodels")
install.packages("quanteda")
install.packages("quanteda.textstats")
install.packages("quanteda.textplots")
library( quanteda.textmodels )
install.packages( quanteda.bundle )
quanteda.bundle <- c( "quanteda", "quanteda.textmodels",
"quanteda.textstats", "quanteda.textplots" )
install.packages( quanteda.bundle )
quanteda.bundle <- c( "quanteda", "quanteda.textmodels",
"quanteda.textstats", "quanteda.textplots" )
install.packages( quanteda.bundle )
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
installed.packages()["quanteda.textmodels", ]
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
install.packages("Rcpp")
install.packages("RcppArmadillo")
install.packages("Matrix")
install.packages("text2vec")
install.packages("tm")
install.packages("glmnet")
install.packages("topicmodels")
install.packages("quanteda")
install.packages("quanteda.textstats")
install.packages("quanteda.textplots")
install.packages("Matrix")
install.packages("text2vec")
install.packages("quanteda")
install.packages("quanteda.textplots")
install.packages("Rcpp")
install.packages("Rcpp")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
install.packages("devtools")
install.packages("Rcpp")
install.packages("RcppArmadillo")
install.packages("Matrix")
install.packages("text2vec")
install.packages("tm")
install.packages("glmnet")
install.packages("topicmodels")
install.packages("quanteda")
install.packages("quanteda.textstats")
install.packages("devtools")
install.packages("quanteda.textplots")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
Sys.setenv(LD_LIBRARY_PATH="/usr/local/Cellar/gcc/14.2.0_1/lib/gcc/current")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
Sys.setenv(LD_LIBRARY_PATH="/usr/local/Cellar/gcc/14.2.0_1/lib/gcc/current")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
Sys.setenv(LD_LIBRARY_PATH="/usr/local/Cellar/gcc/14.2.0_1/lib/gcc/current")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
devtools::install_github("quanteda/quanteda.textmodels")
system("which gfortran")
system("echo '      print *, \"Hello, world!\"' > test.f90")
system("gfortran -o test test.f90")
system("./test")
system("echo '      print *, \"Hello, world!\"' > test.f90")
system("gfortran -o test test.f90")
system("./test")
system("which gfortran")
install.packages("Rcpp")
install.packages("RcppArmadillo")
install.packages("Matrix")
install.packages("text2vec")
install.packages("tm")
install.packages("glmnet")
install.packages("topicmodels")
install.packages("quanteda")
install.packages("quanteda.textstats")
install.packages("quanteda.textplots")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
library(quanteda.textmodels)
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
devtools::install_github("quanteda/quanteda.textmodels")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
Sys.setenv(LD_LIBRARY_PATH="/opt/gfortran/lib")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
Sys.setenv(F77 = "/usr/local/bin/gfortran")
Sys.setenv(FC = "/usr/local/bin/gfortran")
Sys.setenv(LD_LIBRARY_PATH="/opt/gfortran/lib")
install.packages("quanteda.textmodels", type = "source", repos = "https://cran.r-project.org")
library(quanteda.textmodels)
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
library( quanteda.textstats )
library( quanteda.textplots )
library( dplyr )
library( pander )
library( quanteda )
library( quanteda.textmodels )
library( quanteda.textstats )
library( quanteda.textplots )
URL <- "https://github.com/DS4PS/cpp-527-spr-2020/blob/master/labs/data/IRS-1023-EZ-MISSIONS.rds?raw=true"
dat <- readRDS(gzcon(url( URL )))
head( dat[ c("orgname","codedef01","mission") ] ) %>% pander()
sum(grepl("^to ", dat$mission, ignore.case = TRUE))
grep("^to ", dat$mission, ignore.case = TRUE, value = TRUE) %>% head()
#Empty Mission Statements
sum(grepl("^\\s*$", dat$mission))
dat$mission[grepl("^\\s*$", dat$mission)] %>% head()
#Missions with Trailing Spaces
sum(grepl("\\s+$", dat$mission))
dat$mission <- trimws(dat$mission)
#Empty Mission Statements
sum(grepl("^\\s*$", dat$mission))
dat$mission[grepl("^\\s*$", dat$mission)] %>% head()
#Empty Mission Statements
sum(grepl("^\\s*$", dat$mission))
dat$mission[grepl("^\\s*$", dat$mission)] %>% head(5)
#Empty Mission Statements
sum(grepl("^\\s*$", dat$mission))
dat$mission[grepl("^\\s*$", dat$mission)] %>% head(20)
#Empty Mission Statements
sum(grepl("^\\s*$", dat$mission))
dat$mission[grepl("^\\s*$", dat$mission)] %>% head()
#Missions Containing $ Symbol
sum(grepl("\\$", dat$mission))
grep("\\$", dat$mission, value = TRUE) %>% head()
#Missions with Two or More Digit Numbers
sum(grepl("\\d{2,}", dat$mission))
grep("\\d{2,}", dat$mission, value = TRUE) %>% head()
# Corpus
corp <- corpus(dat, text_field = "mission")
summary(corp)
# Corpus
corp <- corpus(dat, text_field = "mission")
tokens_clean <- tokens(corp, what = "word",
remove_punct = TRUE) %>%
tokens_tolower() %>%
tokens_remove(stopwords("english"))
summary(corp)
corp <- corpus(dat, text_field = "mission")
summary(corp)  # Check corpus info
tokens_clean <- tokens(corp, what = "word", remove_punct = TRUE) %>%
tokens_tolower() %>%
tokens_remove(stopwords("english"))
dfm_mat <- dfm(tokens_clean)
top_words <- topfeatures(dfm_mat, 10)
print(top_words)
tokens_stemmed <- tokens_wordstem(tokens_clean)
dfm_stemmed <- dfm(tokens_stemmed)
top_stemmed_words <- topfeatures(dfm_stemmed, 10)
print(top_stemmed_words)
textplot_wordcloud(dfm_mat, max_words = 100)
library(ggplot2)
freq_df <- textstat_frequency(dfm_mat, n = 10)
ggplot(freq_df, aes(x = reorder(feature, frequency), y = frequency)) +
geom_col() +
coord_flip() +
labs(title = "Top 10 Most Frequent Words in Mission Statements",
x = "Words", y = "Frequency")
corp <- corpus(dat, text_field = "mission")
summary(corp)  # Check corpus info
corp <- corpus(dat, text_field = "mission")
summary(corp)
dict <- dictionary(list(
"climatechange" = c("climate change"),
"socialjustice" = c("social justice"),
"healthcare" = c("health care"),
"fundraising" = c("fund raising"),
"mentalhealth" = c("mental health"),
"earlyeducation" = c("early education"),
"foodsecurity" = c("food security"),
"sustainableenergy" = c("sustainable energy"),
"cleanwater" = c("clean water"),
"humanrights" = c("human rights")
))
corp <- corpus(dat, text_field = "mission")
dict <- dictionary(list(
"climatechange" = c("climate change"),
"socialjustice" = c("social justice"),
"healthcare" = c("health care"),
"fundraising" = c("fund raising"),
"mentalhealth" = c("mental health"),
"earlyeducation" = c("early education"),
"foodsecurity" = c("food security"),
"sustainableenergy" = c("sustainable energy"),
"cleanwater" = c("clean water"),
"humanrights" = c("human rights")
))
tokens_clean <- tokens(corp, what = "word", remove_punct = TRUE) %>%
tokens_tolower() %>%
tokens_remove(stopwords("english")) %>%
tokens_lookup(dictionary = dict, exclusive = FALSE)
dfm_mat <- dfm(tokens_clean)
top_words <- topfeatures(dfm_mat, 10)
print(top_words)
tokens_stemmed <- tokens_wordstem(tokens_clean)
dfm_stemmed <- dfm(tokens_stemmed)
top_stemmed_words <- topfeatures(dfm_stemmed, 10)
print(top_stemmed_words)
textplot_wordcloud(dfm_mat, max_words = 100)
freq_df <- textstat_frequency(dfm_stemmed, n = 10)
ggplot(freq_df, aes(x = reorder(feature, frequency), y = frequency)) +
geom_col() +
coord_flip() +
labs(title = "Top 10 Most Frequent Words in Mission Statements After Stemming",
x = "Words", y = "Frequency")
head(d_black, 10)
black_community <- grepl("black|african american|minority|racial equity|diversity|civil rights|social justice|inclusion",
dat$mission, ignore.case = TRUE)
black_community <- grepl("black|african american|minority|racial equity|diversity|civil rights|social justice|inclusion",
dat$mission, ignore.case = TRUE)
d_black <- dat[black_community, c("orgname", "codedef01", "mission")]
head(d_black, 10)
nrow(d_black)
write.csv(d_black, "black_community_nonprofits.csv", row.names = FALSE)
library( dplyr )
library( pander )
library( ggplot )
installed.packages(ggplot)
library( dplyr )
library( pander )
library(ggplot2)
library( quanteda )
library( quanteda.textmodels )
library( quanteda.textstats )
library( quanteda.textplots )
URL <- "https://github.com/DS4PS/cpp-527-spr-2020/blob/master/labs/data/IRS-1023-EZ-MISSIONS.rds?raw=true"
dat <- readRDS(gzcon(url( URL )))
head( dat[ c("orgname","codedef01","mission") ] ) %>% pander()
library( dplyr )
library( pander )
library(ggplot2)
library( quanteda )
library( quanteda.textmodels )
library( quanteda.textstats )
library( quanteda.textplots )
URL <- "https://github.com/DS4PS/cpp-527-spr-2020/blob/master/labs/data/IRS-1023-EZ-MISSIONS.rds?raw=true"
dat <- readRDS(gzcon(url( URL )))
head( dat[ c("orgname","codedef01","mission") ] ) %>% pander()
#Missions That Start with "To"
sum(grepl("^to ", dat$mission, ignore.case = TRUE))
grep("^to ", dat$mission, ignore.case = TRUE, value = TRUE) %>% head()
#Empty Mission Statements
sum(grepl("^\\s*$", dat$mission))
dat$mission[grepl("^\\s*$", dat$mission)] %>% head()
#Missions Containing $ Symbol
sum(grepl("\\$", dat$mission))
grep("\\$", dat$mission, value = TRUE) %>% head()
#Missions with Two or More Digit Numbers
sum(grepl("\\d{2,}", dat$mission))
grep("\\d{2,}", dat$mission, value = TRUE) %>% head()
#Missions with Trailing Spaces
sum(grepl("\\s+$", dat$mission))
dat$mission <- trimws(dat$mission)
corp <- corpus(dat, text_field = "mission")
dict <- dictionary(list(
"climatechange" = c("climate change"),
"socialjustice" = c("social justice"),
"healthcare" = c("health care"),
"fundraising" = c("fund raising"),
"mentalhealth" = c("mental health"),
"earlyeducation" = c("early education"),
"foodsecurity" = c("food security"),
"sustainableenergy" = c("sustainable energy"),
"cleanwater" = c("clean water"),
"humanrights" = c("human rights")
))
tokens_clean <- tokens(corp, what = "word", remove_punct = TRUE) %>%
tokens_tolower() %>%
tokens_remove(stopwords("english")) %>%
tokens_lookup(dictionary = dict, exclusive = FALSE)
dfm_mat <- dfm(tokens_clean)
top_words <- topfeatures(dfm_mat, 10)
print(top_words)
tokens_stemmed <- tokens_wordstem(tokens_clean)
dfm_stemmed <- dfm(tokens_stemmed)
top_stemmed_words <- topfeatures(dfm_stemmed, 10)
print(top_stemmed_words)
textplot_wordcloud(dfm_mat, max_words = 100)
freq_df <- textstat_frequency(dfm_stemmed, n = 10)
ggplot(freq_df, aes(x = reorder(feature, frequency), y = frequency)) +
geom_col() +
coord_flip() +
labs(title = "Top 10 Most Frequent Words in Mission Statements After Stemming",
x = "Words", y = "Frequency")
black_community <- grepl("black|african american|minority|racial equity|diversity|civil rights|social justice|inclusion",
dat$mission, ignore.case = TRUE)
d_black <- dat[black_community, c("orgname", "codedef01", "mission")]
head(d_black, 10)
nrow(d_black)
write.csv(d_black, "black_community_nonprofits.csv", row.names = FALSE)
